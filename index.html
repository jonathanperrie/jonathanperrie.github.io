<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jonathan Perrie | Portfolio</title>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        body {
            background-color: #102a23;
            color: #a7f3d0;
        }
        .prose h1, .prose h2, .prose h3 { color: #d1fae5; }
        .prose p { color: #a7f3d0; }
        .prose a { color: #6ee7b7; text-decoration: underline; }
        .prose ul { list-style-type: disc; padding-left: 1.5rem; }
        .prose li { margin-bottom: 0.5rem; }
        .prose pre {
            background-color: #0c1f1a;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
        }
        .prose code {
            color: #f0fdf4;
            font-family: monospace;
        }
    </style>
</head>
<body class="bg-[#102a23]">
    <div id="root"></div>

    <script type="text/babel">
    
    // DATA AND CONSTANTS
    const BLOG_POSTS = [
      {
        id: "post-one",
        slug: "phd_recap",
        title: "3D volcano plot for DGE",
        date: "2025-10-29",
      }
    ];

    const SOCIALS = {
      email: 'mailto:jonathan.perrie@gmail.com',
      linkedIn: "https://www.linkedin.com/in/jonathan-perrie-6bb358a7/",
      googleScholar: "https://scholar.google.com/citations?user=cv6UZBkAAAAJ&hl=en",
      github: "https://github.com/jonathanperrie",
      resume: "/Perrie_Jonathan_Resume.pdf"
    };

    // ICONS
    const LinkedInIcon = () => (
      <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M20.5 2h-17A1.5 1.5 0 002 3.5v17A1.5 1.5 0 003.5 22h17a1.5 1.5 0 001.5-1.5v-17A1.5 1.5 0 0020.5 2zM8 19H5v-9h3zM6.5 8.25A1.75 1.75 0 114.75 6.5 1.75 1.75 0 016.5 8.25zM19 19h-3v-4.74c0-1.42-.6-1.93-1.38-1.93A1.62 1.62 0 0013 14.19V19h-3v-9h2.9v1.3a3.11 3.11 0 012.7-1.4c1.55 0 3.36.96 3.36 4.66z"></path>
      </svg>
    );

    const GoogleScholarIcon = () => (
      <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M5.242 13.769L0 9.5L12 0l12 9.5l-5.242 4.269C17.548 11.249 14.978 9 12 9s-5.548 2.249-6.758 4.769zM12 10c-1.381 0-2.5 1.119-2.5 2.5s1.119 2.5 2.5 2.5s2.5-1.119 2.5-2.5S13.381 10 12 10zM12 15c-1.657 0-3 1.343-3 3s1.343 3 3 3s3-1.343 3-3s-1.343-3-3-3z"></path>
      </svg>
    );

    const GitHubIcon = () => (
      <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path fillRule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.168 6.839 9.492.5.092.682-.217.682-.482 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.031-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.378.203 2.398.1 2.651.64.7 1.03 1.595 1.03 2.688 0 3.848-2.338 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.001 10.001 0 0022 12c0-5.523-4.477-10-10-10z" clipRule="evenodd"></path>
      </svg>
    );

    const DocumentIcon = () => (
        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
    );

    const MailIcon = () => ( <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2"><path strokeLinecap="round" strokeLinejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg> );

    // CORE UI COMPONENTS
    const Header = ({ onNavigate }) => {
      return (
        <header className="fixed top-0 left-0 right-0 z-50 bg-green-950/80 backdrop-blur-sm">
          <div className="container mx-auto px-6 py-4 flex justify-between items-center">
            <button onClick={() => onNavigate('home')} className="text-2xl font-bold text-green-200 hover:text-green-100 transition-colors">
              Home
            </button>
            <nav>
              <ul className="flex items-center space-x-6">
                <li>
                  <button onClick={() => onNavigate('blog')} className="text-2xl font-bold text-green-200 hover:text-green-100 transition-colors">
                    Blog
                  </button>
                </li>
              </ul>
            </nav>
          </div>
        </header>
      );
    };

    const Hero = () => {
      return (
        <section className="min-h-screen flex items-center justify-center text-center pt-16">
            <div className="container mx-auto px-6 flex flex-col items-center text-center">
                <img
                    src="/banner.png"
                    alt="Scenic view of Costa Rica"
                    className="w-full md:w-2/5 max-w-lg rounded-xl shadow-2xl mb-12"
                />
                <h1 className="text-5xl md:text-7xl font-bold text-green-100 mb-4">
                    Jonathan Perrie
                </h1>
                <p className="text-xl md:text-2xl text-green-300 mb-8 max-w-3xl">
                    PhD graduate looking for data science jobs in unique domains.
                </p>
                <div className="flex justify-center items-center space-x-6 mb-8">
                    <a href={SOCIALS.email} aria-label="Email" className="text-green-300 hover:text-green-100 transition-colors"><MailIcon /></a>
                    <a href={SOCIALS.linkedIn} target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" className="text-green-300 hover:text-green-100 transition-colors"><LinkedInIcon /></a>
                    <a href={SOCIALS.googleScholar} target="_blank" rel="noopener noreferrer" aria-label="Google Scholar" className="text-green-300 hover:text-green-100 transition-colors"><GoogleScholarIcon /></a>
                    <a href={SOCIALS.github} target="_blank" rel="noopener noreferrer" aria-label="GitHub" className="text-green-300 hover:text-green-100 transition-colors"><GitHubIcon /></a>
                    <a href={SOCIALS.resume} target="_blank" rel="noopener noreferrer" aria-label="Resume" className="text-green-300 hover:text-green-100 transition-colors"><DocumentIcon /></a>
                </div>
            </div>
        </section>
      );
    };

    const BlogPage = ({ onNavigate }) => (
      <section id="blog" className="py-20 min-h-screen pt-24 md:pt-32">
        <div className="container mx-auto px-6">
          <h2 className="text-4xl font-bold text-center text-green-100 mb-12">Blog</h2>
          <div className="max-w-3xl mx-auto">
            <ul className="space-y-4">
              {BLOG_POSTS.map(post => (
                <li key={post.slug}>
                  <button
                    onClick={() => onNavigate(post.slug)}
                    className="block w-full text-left p-4 bg-green-950 rounded-lg hover:bg-green-900 transition-colors duration-300 shadow-lg"
                  >
                    <div className="flex flex-col sm:flex-row justify-between sm:items-center">
                      <h3 className="text-xl font-bold text-green-100">{post.title}</h3>
                      <p className="text-green-400 font-mono text-sm sm:text-base flex-shrink-0 sm:ml-4 mt-1 sm:mt-0">
                        {post.date}
                      </p>
                    </div>
                  </button>
                </li>
              ))}
            </ul>
          </div>
        </div>
      </section>
    );
    
    const BlogPostPage = ({ slug, onNavigate }) => {
        const [content, setContent] = React.useState('');
        const [isLoading, setIsLoading] = React.useState(true);
        const [error, setError] = React.useState(null);

        const post = BLOG_POSTS.find(p => p.slug === slug);

        React.useEffect(() => {
            if (!post) return;
            
            const filePath = `/blog/${slug}.md`;
            
            const fetchPost = async () => {
                setIsLoading(true);
                setError(null);
                try {
                    const response = await fetch(filePath);
                    if (!response.ok) {
                        throw new Error(`Could not find post. (HTTP ${response.status})`);
                    }
                    const text = await response.text();
                    setContent(text);
                } catch (err) {
                    console.error("Fetch error:", err);
                    setError(err.message);
                } finally {
                    setIsLoading(false);
                }
            };

            fetchPost();
        }, [slug, post]);

        if (!post) {
            return (
                <div className="min-h-screen flex items-center justify-center text-center">
                    <h2 className="text-3xl font-bold text-green-100">404: Post not found.</h2>
                </div>
            );
        }

        let pageContent;
        if (isLoading) {
            pageContent = (
                <div className="text-center">
                    <h2 className="text-3xl font-bold text-green-100 animate-pulse">Loading...</h2>
                </div>
            );
        } else if (error) {
            pageContent = (
                <div className="text-center">
                    <h2 className="text-3xl font-bold text-red-400">Error loading post.</h2>
                    <p className="text-red-300 mt-2">{error}</p>
                </div>
            );
        } else {
            const htmlContent = marked.parse(content);
            pageContent = (
                <React.Fragment>
                    <h1 className="text-4xl md:text-5xl font-bold text-green-100 mb-2">{post.title}</h1>
                    <p className="text-green-400 font-mono mb-8">{post.date}</p>
                    <div className="prose max-w-none" dangerouslySetInnerHTML={{ __html: htmlContent }} />
                </React.Fragment>
            );
        }

        return (
            <section className="py-20 min-h-screen pt-24 md:pt-32">
                <div className="container mx-auto px-6 max-w-3xl">
                    <button onClick={() => onNavigate('blog')} className="text-green-400 hover:text-green-200 transition-colors mb-8">
                        &larr; Back to Blog
                    </button>
                    {pageContent}
                </div>
            </section>
        );
    };

    const HomePage = () => (
      <div>
        <Hero />
      </div>
    );
    
    // MAIN APP COMPONENT
    const App = () => {
      const [currentPage, setCurrentPage] = React.useState('home');
      
      const handleNavigate = (pageId) => {
        setCurrentPage(pageId);
      };

      const renderPage = () => {
        if (currentPage === 'home') return <HomePage />;
        if (currentPage === 'blog') return <BlogPage onNavigate={handleNavigate} />;

        const isBlogPost = BLOG_POSTS.some(p => p.slug === currentPage);
        if (isBlogPost) return <BlogPostPage slug={currentPage} onNavigate={handleNavigate} />;

        return <HomePage />;
      };

      return (
          <div className="bg-[#102a23] text-green-200 font-sans min-h-screen flex flex-col">
              <Header onNavigate={handleNavigate} />
              <main className="flex-grow">
                  {renderPage()}
              </main>
          </div>
      );
    };

    // RENDER THE APP
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);

    </script>
</body>
</html>
